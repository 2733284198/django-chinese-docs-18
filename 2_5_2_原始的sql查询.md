# 进行原始的sql查询（Performing raw SQL queries） #

```
+
|
+---The model layer
    |
    +---Advanced
        |
        +---raw SQL
```

在*模型查询API*不够用的情况下，你可以使用原始的sql语句。django提供两种方法使用原始sql进行查询：一种是使用`Manager.raw()`方法返回模型实例；另一种是完全避开模型层， 直接执行自定义的sql语句。

**警告**

编写原始的sql语句时，应该格外小心。每次使用的时候，都要确保转义了参数中的任何控制字符，以防受到sql注入攻击。更多信息请参阅*防止sql注入*。

## 进行原始查询（Performing raw queries） ##

`raw()`方法用于原始的sql查询，并返回模型的实例：

```
Manager.raw(raw_query, params=None, translations=None)
```

这个方法执行原始的sql查询之后，返回`django.db.models.query.RawQuerySet`的实例。`RawQuerySet`实例可以像一般的`QuerySet`那样，通过迭代来提供对象的实例。

这里最好通过例子展示一下，假设存在以下模型：

```
class Person(models.Model):
    first_name = models.CharField(...)
    last_name = models.CharField(...)
    birth_date = models.DateField(...)
```

你可以像这样执行自定义的sql语句：

```
>>> for p in Person.objects.raw('SELECT * FROM myapp_person'):
...     print(p)
John Smith
Jane Jones
```

当然，这个例子不是特别有趣，和直接使用`Person.objects.all()`的结果一模一样。但是，`raw()`拥有其它更强大的使用方法。

** 模型对应表的名称 **

**警告**

传递给`raw()`方法的sql语句并没有任何检查，django默认它会返回一个数据集，但这不是强制性的。如果查询的结果不是数据集，则会返回一个错误。

